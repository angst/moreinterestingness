<html>
<head> 
<title>Interestingness</title> 
<script>
 
function show(photo) {
  console.log(photo, photo.usage.canblog, photo.usage.candownload)
  document.getElementById('photo').setAttribute('src', photo.src);
  var title = document.getElementById('title');
  title.innerText = photo.title._content || 'untitled';
  title.setAttribute('href', photo.urls.url[0]._content);
  document.getElementById('buddyicon').setAttribute('src', photo.buddyicon);
  document.getElementById('owner').setAttribute('href', 'http://www.flickr.com/photos/'+photo.owner.nsid+'/');;
  document.getElementById('buddyicon').setAttribute('title', photo.owner.realname);;
}

function init() {
  show(chrome.extension.getBackgroundPage().getNext());

  document.addEventListener('keypress', function(e) {
    if (e.keyCode==106) {
      show(chrome.extension.getBackgroundPage().getNext());
    }
    if (e.keyCode==107) {
      // current_idx = (current_idx - 1 + photos.length) % photos.length;
      // load(photos[current_idx]);
    }
  }, true);
};

window.onload = init;
 
 
</script> 
<style>
* {
    margin: 0;
    padding: 0;
}

html, body, #bg, #bg table, #bg td {
    height:100%;
    width:100%;
    overflow:hidden;
    background: #000;
}

#bg {
    position: fixed;
}

#bg div {
    height:200%;
    left:-50%;
    position:absolute;
    top:-50%;
    width:200%;
}

#bg td {
    text-align:center;
    vertical-align:middle;
}

#bg img {
    margin:0 auto;
    min-height:50%;
    min-width:50%;
}
#title {
  background: rgba(0,0,0,0.9);
  font: 16px "Helvetica Neue", "Helvetica", Arial, sans-serif;
  font-weight: lighter;
  bottom: 0px;
  width: 100%;
  height: 32px;
  left: 48px;
  padding-top: 16px;
  padding-left: 10px;
  position: fixed;
}

#info #owner {
  position: fixed;
  bottom: 0;
  left: 0;
}

#info a {
  color: #fff;
  text-decoration: none;
}

</style> 
</head> 
<body> 
  <div id="bg">
      <div>
          <table cellspacing="0" cellpadding="0">
              <tr>
                  <td><img id="photo"></td>
              </tr>
          </table>
      </div>
  </div>
  <div id="info"><a id="owner"><img id="buddyicon"><span id="name"></span></a><a id="title"></a></div>
</body> 
</html>